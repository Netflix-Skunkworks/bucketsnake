<html><head><meta charset="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1"/><title>Introduction · Bucket Snake</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta property="og:title" content="Introduction · Bucket Snake"/><meta property="og:type" content="website"/><meta property="og:url" content="https://github.com/Netflix-Skunkworks/bucketsnake/bucketsnake/index.html"/><meta property="og:description" content="**This project is in heavy development and not yet ready for production use!**"/><link rel="shortcut icon" href="/bucketsnake/img/favicon.png"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><link rel="stylesheet" href="/bucketsnake/css/main.css"/></head><body class="sideNavVisible"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/bucketsnake/"><img class="logo" src="/bucketsnake/img/logo.png"/><h2 class="headerTitle">Bucket Snake</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li><a href="/bucketsnake/docs/intro.html" target="_self">Docs</a></li><li><a href="https://github.com/Netflix-Skunkworks/bucketsnake" target="_self">GitHub</a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="container docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><i></i></div><h2><i>›</i><span>Introduction &amp; Background</span></h2></div><div class="navGroups"><div class="navGroup navGroupActive"><h3>Introduction &amp; Background</h3><ul><li class="navListItem navListItemActive"><a class="navItem navItemActive" href="/bucketsnake/docs/intro.html">Introduction</a></li><li class="navListItem"><a class="navItem" href="/bucketsnake/docs/s3background.html">S3 Background</a></li><li class="navListItem"><a class="navItem" href="/bucketsnake/docs/howitworks.html">How it works</a></li><li class="navListItem"><a class="navItem" href="/bucketsnake/docs/permissions.html">Permission Reference</a></li></ul></div><div class="navGroup navGroupActive"><h3>Installation &amp; Configuration</h3><ul><li class="navListItem"><a class="navItem" href="/bucketsnake/docs/installation.html">Deployment</a></li><li class="navListItem"><a class="navItem" href="/bucketsnake/docs/configuration.html">Configuration</a></li></ul></div></div></section></div><script>
          var toggler = document.getElementById('navToggler');
          var nav = document.getElementById('docsNav');
          toggler.onclick = function() {
            nav.classList.toggle('docsSliderActive');
          };
        </script></nav></div><div class="container mainContainer"><div class="wrapper"><div class="post"><header class="postHeader"><h1>Introduction</h1></header><article><div><span><p><strong>This project is in heavy development and not yet ready for production use!</strong></p>
<p>Bucket Snake is an AWS Lambda function that provisions S3 access for IAM roles. A primary feature
of Bucket Snake is to create IAM roles that reside in the account where the S3 buckets live. This facilitates
proper cross-account S3 bucket access (via IAM role assumption).</p>
<p>S3's permission model complicates S3 access in large environments. This complexity is increased with
S3's use of Bucket and Object ownership. When the ownership of buckets and objects are different,
there can be annoying and hard to scale permissions issues.  By using IAM roles in the same account
a bucket lives in, you can avoid mis-matched ownership and rely on IAM and/or S3 bucket policies
to permit access to buckets. Avoiding ACLs makes S3 access much easier to manage at scale.</p>
<h2><a class="anchor" aria-hidden="true" name="bucket-snake-aware-s3-clients"></a><a href="#bucket-snake-aware-s3-clients" aria-hidden="true" class="hash-link" ><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Bucket-Snake aware S3 clients?</h2>
<p>Bucket Snake provisions the IAM roles for access. But, this is only 1/2 of the solution. The second
half is to have an S3 client that is aware of:</p>
<ol>
<li>The location of the S3 buckets</li>
<li>The role to assume into</li>
</ol>
<p>With the above, an application should be able to access any bucket required in your infrastructure without
ever needing to worry about per-object permissions.</p>
<p><strong>Currently, there are no Bucket-Snake aware ready-to-use clients. This is under active development!</strong></p>
<h2><a class="anchor" aria-hidden="true" name="s3-permissions-complexity"></a><a href="#s3-permissions-complexity" aria-hidden="true" class="hash-link" ><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>S3 Permissions Complexity</h2>
<p>Common S3 challenges to that one will often encounter:</p>
<ol>
<li>Which account owns an S3 bucket? (AWS S3 ARNs lack account IDs.)</li>
<li>Which specific S3 permissions are actually required for performing the actions I need?</li>
<li>What about cross-account access? What's the best way of granting permissions for cross-account without
having to rely on ACLs on each and every object?</li>
</ol>
<p>Bucket Snake resolves the above by:</p>
<ol>
<li>Relying on Historical's S3 Report JSON (Full look-up table of all S3 buckets you own, and which account they reside in)</li>
<li>Abstracting S3 permissions into simple <code>list</code>, <code>get</code>, <code>put</code>, and <code>delete</code> actions against a bucket and prefix.</li>
<li>IAM role provisioning in destination bucket accounts with correct <code>sts:AssumeRole</code> and S3 permissions grant the required
permissions and avoid bucket-and-object ownership issues.</li>
</ol>
<h3><a class="anchor" aria-hidden="true" name="cross-account-access-issues"></a><a href="#cross-account-access-issues" aria-hidden="true" class="hash-link" ><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Cross-account access issues?</h3>
<p><strong>TL;DR:</strong> You always want to use an IAM role within the bucket-owning account for placing (as well as reading)
objects to avoid bucket-and object ownership mismatches. Otherwise, the account that owns the objects will need
to explicitly add an ACL to each and every object that requires additional accounts to access. This massively
increases S3 permissions complexity.</p>
<p>The next section documents this in detail.</p>
</span></div></article></div><div class="docs-prevnext"><a class="docs-next button" href="s3background.html">S3 Background Information →</a></div></div></div></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/bucketsnake/" class="nav-home"><img src="/bucketsnake/img/logo.png" alt="Bucket Snake" width="66" height="58"/></a><div><h5>Background</h5><a href="/bucketsnake/docs/intro.html">Introduction</a><a href="/bucketsnake/docs/s3background.html">General S3 Background</a><a href="/bucketsnake/docs/howitworks.html">How Bucket Snake Works</a></div><div><h5>Getting Started</h5><a href="/bucketsnake/docs/installation.html">Installation</a><a href="/bucketsnake/docs/configuration.html">Configuration</a></div><div><h5>Community</h5><a href="https://github.com/Netflix-Skunkworks/bucketsnake">GitHub</a></div></section><section class="copyright">These docs were created with <a href="https://docusaurus.io/">Docusaurus</a>.</section><section class="copyright" style="padding-top:10px;">Copyright © 2017 Netflix, Inc.</section></footer></div></body></html>